<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hum to Search</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- TikTok Pixel Code Start -->
    <script>
    !function (w, d, t) {
      w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(
    var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var r="https://analytics.tiktok.com/i18n/pixel/events.js",o=n&&n.partner;ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=r,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};n=document.createElement("script")
    ;n.type="text/javascript",n.async=!0,n.src=r+"?sdkid="+e+"&lib="+t;e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)};


      ttq.load('D5IQ5E3C77UAODHQ3EQG');
      ttq.load('D5IQQ1BC77U666PPKKS0');
      ttq.page();
    }(window, document, 'ttq');
    </script>
    <!-- TikTok Pixel Code End -->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
      import { getDatabase, ref, push, set, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyCCVOglYRkUTSjjeWWfz07dLiSlo6R-jAQ",
        authDomain: "humtosearchapp.firebaseapp.com",
        databaseURL: "https://humtosearchapp-default-rtdb.firebaseio.com",
        projectId: "humtosearchapp",
        storageBucket: "humtosearchapp.firebasestorage.app",
        messagingSenderId: "102040180022",
        appId: "1:102040180022:web:57f73230db294e153c4f97",
        measurementId: "G-GH3JS2NZED"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const db = getDatabase(app);

      window.saveNotifyEmail = async (email) => {
        const entryRef = push(ref(db, "notifyEmails"));
        await set(entryRef, {
          email,
          createdAt: serverTimestamp()
        });
      };
    </script>
    <style>
        /* Critical CSS to prevent FOUC */
        body {
            background-color: #050510;
            color: white;
            margin: 0;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>

<body>

    <div id="app">
        <!-- SCREEN 1: HOME -->
        <section id="screen-home" class="screen active">
            <div class="content-center">
                <div class="logo-area">
                    <div class="icon-pulse">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 3V21M9 6V18M15 6V18M6 9V15M18 9V15" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <h1>Hum to Search</h1>
                    <p>Find that song stuck in your head.</p>
                </div>

                <button id="btn-start" class="btn-primary">
                    <span class="icon">ðŸŽ¤</span> Tap to Hum
                </button>
            </div>
        </section>

        <!-- SCREEN 2: RECORDING -->
        <section id="screen-recording" class="screen hidden">
            <div class="content-center">
                <h2>Listening...</h2>
                <p class="subtext">Hum the melody clearly</p>

                <div class="visualizer">
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                </div>
            </div>
            <button id="btn-stop-early" class="btn-text">Cancel</button>
        </section>

        <!-- SCREEN 3: PROCESSING -->
        <section id="screen-processing" class="screen hidden">
            <div class="content-center">
                <div class="spinner">
                    <div class="spinner-ring"></div>
                </div>
                <h2>Identifying...</h2>
                <p class="subtext">Matching audio fingerprints</p>
            </div>
        </section>

        <!-- SCREEN 4: PAYWALL / RESULT TEASER -->
        <section id="screen-paywall" class="screen hidden">
            <div class="content-center">
                <div class="success-icon">âœ¨</div>
                <h2>Song Found!</h2>
                <p>We have identified your song with <strong>98% accuracy</strong>.</p>

                <div class="paywall-card">
                    <div class="blur-overlay">
                        <div class="fake-song-row"></div>
                        <div class="fake-song-row shorter"></div>
                    </div>
                    <div class="lock-content">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M19 11H5C3.89543 11 3 11.8954 3 13V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V13C21 11.8954 20.1046 11 19 11Z" />
                            <path d="M7 11V7C7 4.23858 9.23858 2 12 2C14.7614 2 17 4.23858 17 7V11" />
                        </svg>
                        <h3>Unlock Result</h3>
                        <p class="price">Â£1.99</p>
                        <p class="subtext-price">for 20 searches</p>
                        <p class="per-search highlight">Just Â£0.10 per search!</p>
                    </div>
                </div>

                <button id="btn-pay" class="btn-primary full-width">
                    Get 20 Searches - Â£1.99
                </button>
                <div class="trust-badges">
                    <span>ðŸ”’ Secure Payment</span>
                </div>
            </div>
        </section>

        <!-- SCREEN 5: NOTIFY / COMING SOON -->
        <section id="screen-notify" class="screen hidden">
            <div class="content-center">
                <div class="heart-icon">Testing</div>
                <h2>Thanks for your interest!</h2>
                <p>We are currently testing this feature. The ability to identify songs by humming is coming very soon!
                </p>

                <div class="notify-form">
                    <p>Enter your email to get notified when it's ready:</p>
                    <input type="email" id="email-input" placeholder="name@example.com">
                    <button id="btn-notify" class="btn-secondary">Notify Me</button>
                </div>
                <p id="notify-success" class="hidden success-msg">Thanks! We'll keep you posted.</p>
            </div>
        </section>

    </div>

    <script src="script.js"></script>
</body>

</html>
